<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/master.css" />
    <title>Búsqueda de Canchas - PUMAF</title>
  </head>
  <body>
    <header>…</header>
    <main class="background">
      <section class="cards">
        <!-- Aquí se volcarán las cards dinámicamente -->
      </section>
    </main>
    <footer>…</footer>

    <!-- Ionicons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const canchas = JSON.parse(sessionStorage.getItem('canchas') || '[]');
        const container = document.querySelector('section.cards');
        container.innerHTML = '';

        canchas.forEach(c => {
          const clubKey = `club_${c.club.id}`;
          sessionStorage.setItem(clubKey, JSON.stringify(c.club));

          const link = document.createElement('a');
            link.href = `./datosClub.html?clubId=${c.club.id}`;
            link.className = 'cardLink';
            
          const article = document.createElement('article');
          article.className = 'cardCancha';
          article.innerHTML = `
            <div class="cardHead">
              <img 
                src="${c.club?.logo || 'https://placehold.co/350x200'}" 
                alt="${c.club?.nombre_fantasia || 'Cancha'}"
              />
            </div>
            <div class="cardBody">
              <h2>${c.club?.nombre_fantasia || 'Cancha sin nombre'}</h2>
              <p class="detalle">
                <ion-icon name="compass-outline"></ion-icon>
                ${c.domicilio?.calle || ''} ${c.domicilio?.numeracion || ''}
              </p>
              <p class="detalle">
                <strong>Cancha #${c.nro_cancha}</strong> · 
                ${c.tipo_superficie?.tipo_superficie || ''}
                · ${c.techada ? 'Techada' : 'Al aire libre'}
              </p>
              <!-- Si tu modelo aporta precio, por ejemplo c.precio: -->
              ${ c.precio 
                ? `<span>$${c.precio}</span>` 
                : ''
              }
              <div class="buttonsTurno">
                <!-- Si tienes horarios en el JSON: -->
                ${ (c.horarios || []).map(h => 
                    `<button class="btn">${h}</button>`
                  ).join('')
                }
              </div>
            </div>
          `;
          container.appendChild(link);
          link.appendChild(article);
        });

        // Opcional: si no hay canchas
        if (!canchas.length) {
          container.innerHTML = '<p>No se encontraron canchas para ese deporte.</p>';
        }
      });
    </script>
  </body>
</html>
